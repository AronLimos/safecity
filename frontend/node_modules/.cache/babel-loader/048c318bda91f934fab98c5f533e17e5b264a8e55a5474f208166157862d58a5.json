{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ruelj\\\\Desktop\\\\JS\\\\SafeCity_V2\\\\SafeCity_V2\\\\frontend\\\\src\\\\pages\\\\CreateReportPage.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateReportPage = () => {\n  _s();\n  const [categories, setCategories] = useState([]);\n  const [statuses, setStatuses] = useState([]);\n  const [locations, setLocations] = useState([]);\n  const [formData, setFormData] = useState({\n    category: '',\n    status: '',\n    location: '',\n    description: ''\n  });\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n  useEffect(() => {\n    if (!token) return navigate('/login');\n    const fetchData = async () => {\n      try {\n        const headers = {\n          Authorization: `Bearer ${token}`\n        };\n        const [catRes, statusRes, locRes] = await Promise.all([axios.get('http://localhost:5000/api/categories', {\n          headers\n        }), axios.get('http://localhost:5000/api/statuses', {\n          headers\n        }), axios.get('http://localhost:5000/api/locations', {\n          headers\n        })]);\n        setCategories(catRes.data);\n        setStatuses(statusRes.data);\n        setLocations(locRes.data);\n      } catch (err) {\n        setError('Failed to load form options');\n        console.error(err);\n      }\n    };\n    fetchData();\n  }, [token, navigate]);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const user = JSON.parse(atob(token.split('.')[1])); // decode payload\n      await axios.post('http://localhost:5000/api/reports', {\n        ...formData,\n        user: user.id\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      navigate('/dashboard');\n    } catch (err) {\n      setError('Failed to create report');\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: '500px',\n      margin: '40px auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Create New Report\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Category:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"category\",\n        value: formData.category,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: cat._id,\n          children: cat.name\n        }, cat._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Status:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"status\",\n        value: formData.status,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select Status\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), statuses.map(status => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: status._id,\n          children: status.name\n        }, status._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Location:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"location\",\n        value: formData.location,\n        onChange: handleChange,\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Select Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), locations.map(loc => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: loc._id,\n          children: loc.name\n        }, loc._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Description:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: \"description\",\n        value: formData.description,\n        onChange: handleChange,\n        rows: 4,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: {\n          marginTop: '10px'\n        },\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateReportPage, \"pGbEk9acD5j6Xtn6HfZwsg+/B4I=\", false, function () {\n  return [useNavigate];\n});\n_c = CreateReportPage;\nexport default CreateReportPage;\nvar _c;\n$RefreshReg$(_c, \"CreateReportPage\");","map":{"version":3,"names":["useEffect","useState","axios","useNavigate","jsxDEV","_jsxDEV","CreateReportPage","_s","categories","setCategories","statuses","setStatuses","locations","setLocations","formData","setFormData","category","status","location","description","error","setError","navigate","token","localStorage","getItem","fetchData","headers","Authorization","catRes","statusRes","locRes","Promise","all","get","data","err","console","handleChange","e","target","name","value","handleSubmit","preventDefault","user","JSON","parse","atob","split","post","id","style","maxWidth","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","color","onSubmit","onChange","required","map","cat","_id","loc","rows","type","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/ruelj/Desktop/JS/SafeCity_V2/SafeCity_V2/frontend/src/pages/CreateReportPage.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst CreateReportPage = () => {\r\n    const [categories, setCategories] = useState([]);\r\n    const [statuses, setStatuses] = useState([]);\r\n    const [locations, setLocations] = useState([]);\r\n    const [formData, setFormData] = useState({\r\n        category: '',\r\n        status: '',\r\n        location: '',\r\n        description: ''\r\n    });\r\n    const [error, setError] = useState('');\r\n    const navigate = useNavigate();\r\n    const token = localStorage.getItem('token');\r\n\r\n    useEffect(() => {\r\n        if (!token) return navigate('/login');\r\n\r\n        const fetchData = async () => {\r\n            try {\r\n                const headers = { Authorization: `Bearer ${token}` };\r\n                const [catRes, statusRes, locRes] = await Promise.all([\r\n                    axios.get('http://localhost:5000/api/categories', { headers }),\r\n                    axios.get('http://localhost:5000/api/statuses', { headers }),\r\n                    axios.get('http://localhost:5000/api/locations', { headers })\r\n                ]);\r\n                setCategories(catRes.data);\r\n                setStatuses(statusRes.data);\r\n                setLocations(locRes.data);\r\n            } catch (err) {\r\n                setError('Failed to load form options');\r\n                console.error(err);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [token, navigate]);\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const user = JSON.parse(atob(token.split('.')[1])); // decode payload\r\n            await axios.post(\r\n                'http://localhost:5000/api/reports',\r\n                { ...formData, user: user.id },\r\n                { headers: { Authorization: `Bearer ${token}` } }\r\n            );\r\n            navigate('/dashboard');\r\n        } catch (err) {\r\n            setError('Failed to create report');\r\n            console.error(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ maxWidth: '500px', margin: '40px auto' }}>\r\n            <h2>Create New Report</h2>\r\n            {error && <p style={{ color: 'red' }}>{error}</p>}\r\n            <form onSubmit={handleSubmit}>\r\n                <label>Category:</label>\r\n                <select name=\"category\" value={formData.category} onChange={handleChange} required>\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map(cat => (\r\n                        <option key={cat._id} value={cat._id}>{cat.name}</option>\r\n                    ))}\r\n                </select>\r\n\r\n                <label>Status:</label>\r\n                <select name=\"status\" value={formData.status} onChange={handleChange} required>\r\n                    <option value=\"\">Select Status</option>\r\n                    {statuses.map(status => (\r\n                        <option key={status._id} value={status._id}>{status.name}</option>\r\n                    ))}\r\n                </select>\r\n\r\n                <label>Location:</label>\r\n                <select name=\"location\" value={formData.location} onChange={handleChange} required>\r\n                    <option value=\"\">Select Location</option>\r\n                    {locations.map(loc => (\r\n                        <option key={loc._id} value={loc._id}>{loc.name}</option>\r\n                    ))}\r\n                </select>\r\n\r\n                <label>Description:</label>\r\n                <textarea\r\n                    name=\"description\"\r\n                    value={formData.description}\r\n                    onChange={handleChange}\r\n                    rows={4}\r\n                    required\r\n                />\r\n\r\n                <button type=\"submit\" style={{ marginTop: '10px' }}>Submit</button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateReportPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}